<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<style>
    body {

        padding: 0;
        margin: 0;

        background-color: rgb(255, 210, 210);

    }

    #containerPersonagens {

        width: 90vw;
        height: 90vh;
        display: flex;
        justify-content: space-evenly;

    }

    #containerTanque {

        display: grid;
        grid-template-columns: 25% 25% 25% 25%;
        gap: 2% 2%;

        width: 25%;
        background-color: brown;
        padding: 1%;

    }

    #containerDano {

        display: grid;
        grid-template-columns: 19% 19% 19% 19% 19%;
        gap: 2% 2%;

        width: 40%;
        background-color: brown;
        padding: 1%;

    }

    #containerSuporte {

        display: grid;
        grid-template-columns: 25% 25% 25% 25%;
        gap: 2% 2%;

        width: 25%;
        background-color: brown;
        padding: 1%;

    }

    .cardPersonagem {

        display: flex;
        flex-direction: column;

    }

    .cardPersonagem img {

        background-size: auto;

    }

    .cardPersonagem input {

        margin: 0;

    }

    .cardPersonagem span {

        width: 100%;
        height: 20%;
        text-align: center;
        background-color: white;

    }

    .check {

        width: 100%;
        height: 100%;
        opacity: 50%;
    }
</style>

<body onload="carregarCardsPersonagens()">

    <div>
        <div>
            <img src="https://cdn-icons-png.flaticon.com/512/686/686317.png" alt="" width="5%">
            Todos
        </div>
        <div>
            <button>Voltar</button>
        </div>
    </div>

    <div id="containerPersonagens">

        <div id="containerTanque">

        </div>

        <div id="containerDano">

        </div>

        <div id="containerSuporte">

        </div>

    </div>

    <button onclick="salvarCadastrarPersonagens()">Pronto</button>

</body>

</html>

<script>

    const listaNomesPersonagensTanque = ['D.Va', 'Doomfist', 'Junker Queen', 'Mauga', 'Orisa', 'Ramattra', 'Reinhardt', 'Roadhog', 'Sigma', 'Winston', 'Wrecking Ball', 'Zarya'];
    const listaNomesPersonagensTanqueParaID = ['dva', 'doomfist', 'junkerQueen', 'mauga', 'orisa', 'ramattra', 'reinhardt', 'roadhog', 'sigma', 'winston', 'wreckingBall', 'zarya'];
    const listaImagensPersonagensTanque = ['https://abre.ai/imagemdva', 'https://abre.ai/imagemdoomfist', 'https://abre.ai/imagemjunkerqueen', 'https://abre.ai/imagemmauga', 'https://abre.ai/imagemorisa', 'https://abre.ai/imagemramattra', 'https://abre.ai/imagemreinhardt', 'https://abre.ai/imagemroadhog', 'https://abre.ai/imagemsigma', 'https://abre.ai/imagemwinston', 'https://abre.ai/imagemwreckingball', 'https://abre.ai/imagemzarya'];

    const listaNomesPersonagensDano = ['Ashe', 'Bastion', 'Cassidy', 'Echo', 'Genji', 'Hanzo', 'Junkrat', 'Mei', 'Pharah', 'Reaper', 'Sojourn', 'Soldado: 76', 'Sombra', 'Symmetra', 'Torbjörn', 'Tracer', 'Venture', 'Widowmaker'];
    const listaNomesPersonagensDanoParaID = ['ashe', 'bastion', 'cassidy', 'echo', 'genji', 'hanzo', 'junkrat', 'mei', 'pharah', 'reaper', 'sojourn', 'soldado76', 'sombra', 'symmetra', 'torbjorn', 'tracer', 'venture', 'widowmaker'];
    const listaImagensPersonagensDano = ['https://abre.ai/imagemashe', 'https://abre.ai/imagembastion', 'https://abre.ai/imagemcassidy', 'https://abre.ai/imagemecho', 'https://abre.ai/imagemgenji', 'https://abre.ai/imagemhanzo', 'https://abre.ai/imagemjunkrat', 'https://abre.ai/imagemmei', 'https://abre.ai/imagemphara', 'https://abre.ai/imagemreaper', 'https://abre.ai/imagemsojourn', 'https://abre.ai/imagemsoldado76', 'https://abre.ai/imagemsombra', 'https://abre.ai/imagemsymmetra', 'https://abre.ai/imagemtorbjorn', 'https://abre.ai/imagemtracer', 'https://abre.ai/imagemventure', 'https://abre.ai/imagemwidowmaker'];

    const listaNomesPersonagensSuporte = ['Ana', 'Baptiste', 'Brigitte', 'Illari', 'Kiriko', 'Lifeweaver', 'Lúcio', 'Mercy', 'Moira', 'Zenyatta'];
    const listaNomesPersonagensSuporteParaID = ['ana', 'baptiste', 'brigitte', 'illari', 'kiriko', 'lifeweaver', 'lucio', 'mercy', 'moira', 'zenyatta'];
    const listaImagensPersonagensSuporte = ['https://abre.ai/imagemana', 'https://abre.ai/imagembaptiste', 'https://abre.ai/imagembrigitte', 'https://abre.ai/imagemillari', 'https://abre.ai/imagemkiriko', 'https://abre.ai/imagemlifeweaver', 'https://abre.ai/imagemlucio', 'https://abre.ai/imagemmercy', 'https://abre.ai/imagemmoira', 'https://abre.ai/imagemzenyatta'];

    const listaPersonagensEscolhidos = [];
    let [personagem1, personagem2, personagem3] = listaPersonagensEscolhidos;

    function carregarCardsPersonagens() {

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensTanque.length; contadorPosicao++) {

            const nomePersonagem = listaNomesPersonagensTanque[contadorPosicao];
            const nomePersonagemID = listaNomesPersonagensTanqueParaID[contadorPosicao];
            const linkImagemPersonagem = listaImagensPersonagensTanque[contadorPosicao];

            containerTanque.innerHTML += `<div class="cardPersonagem" id="div_${nomePersonagemID}" style="background-image: url(${linkImagemPersonagem});">
            <input type="checkbox" id="check_${nomePersonagemID}" class="check" onclick="verificarCheckTodos()">
            <span>${nomePersonagem.toUpperCase()}</span>
            </div>`;

        }

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensDano.length; contadorPosicao++) {

            const nomePersonagem = listaNomesPersonagensDano[contadorPosicao];
            const nomePersonagemID = listaNomesPersonagensDanoParaID[contadorPosicao];
            const linkImagemPersonagem = listaImagensPersonagensDano[contadorPosicao];

            containerDano.innerHTML += `<div class="cardPersonagem" id="div_${nomePersonagemID}" style="background-image: url(${linkImagemPersonagem});">
            <input type="checkbox" id="check_${nomePersonagemID}" class="check" onclick="verificarCheckTodos()">
            <span>${nomePersonagem.toUpperCase()}</span>
            </div>`;

        }

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensSuporte.length; contadorPosicao++) {

            const nomePersonagem = listaNomesPersonagensSuporte[contadorPosicao];
            const nomePersonagemID = listaNomesPersonagensSuporteParaID[contadorPosicao];
            const linkImagemPersonagem = listaImagensPersonagensSuporte[contadorPosicao];

            containerSuporte.innerHTML += `<div class="cardPersonagem" id="div_${nomePersonagemID}" style="background-image: url(${linkImagemPersonagem});">
            <input type="checkbox" id="check_${nomePersonagemID}" class="check" onclick="verificarCheckTodos()">
            <span>${nomePersonagem.toUpperCase()}</span>
            </div>`;

        }

    }

    function verificarCheckTodos() {

        let qtdPersonagensChecked = 0;

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensTanque.length; contadorPosicao++) {

            const nomePersonagemID = listaNomesPersonagensTanqueParaID[contadorPosicao];
            const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

            if (checkPersonagem.checked) {

                qtdPersonagensChecked++;

            }

        }

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensDano.length; contadorPosicao++) {

            const nomePersonagemID = listaNomesPersonagensDanoParaID[contadorPosicao];
            const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

            if (checkPersonagem.checked) {

                qtdPersonagensChecked++;

            }

        }

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensSuporte.length; contadorPosicao++) {

            const nomePersonagemID = listaNomesPersonagensSuporteParaID[contadorPosicao];
            const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

            if (checkPersonagem.checked) {

                qtdPersonagensChecked++;

            }

        }

        if (qtdPersonagensChecked == 3) {

            for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensTanque.length; contadorPosicao++) {
                const nomePersonagemID = listaNomesPersonagensTanqueParaID[contadorPosicao];
                const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

                if (!checkPersonagem.checked) {

                    checkPersonagem.disabled = true;

                }
            }

            for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensDano.length; contadorPosicao++) {
                const nomePersonagemID = listaNomesPersonagensDanoParaID[contadorPosicao];
                const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

                if (!checkPersonagem.checked) {

                    checkPersonagem.disabled = true;

                }

            }

            for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensSuporte.length; contadorPosicao++) {
                const nomePersonagemID = listaNomesPersonagensSuporteParaID[contadorPosicao];
                const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

                if (!checkPersonagem.checked) {

                    checkPersonagem.disabled = true;

                }
            }

        } else {

            for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensTanque.length; contadorPosicao++) {
                const nomePersonagemID = listaNomesPersonagensTanqueParaID[contadorPosicao];
                const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

                checkPersonagem.disabled = false;

            }

            for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensDano.length; contadorPosicao++) {
                const nomePersonagemID = listaNomesPersonagensDanoParaID[contadorPosicao];
                const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

                checkPersonagem.disabled = false;

            }

            for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensSuporte.length; contadorPosicao++) {
                const nomePersonagemID = listaNomesPersonagensSuporteParaID[contadorPosicao];
                const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

                checkPersonagem.disabled = false;

            }

        }



    }

    function salvarCadastrarPersonagens() {

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensTanque.length; contadorPosicao++) {

            const nomePersonagemID = listaNomesPersonagensTanqueParaID[contadorPosicao];
            const nomePersonagem = listaNomesPersonagensTanque[contadorPosicao];
            const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

            if (checkPersonagem.checked) {

                listaPersonagensEscolhidos.push(nomePersonagem);

            }

        }

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensDano.length; contadorPosicao++) {

            const nomePersonagemID = listaNomesPersonagensDanoParaID[contadorPosicao];
            const nomePersonagem = listaNomesPersonagensDano[contadorPosicao];
            const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

            if (checkPersonagem.checked) {

                listaPersonagensEscolhidos.push(nomePersonagem);

            }

        }

        for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensSuporte.length; contadorPosicao++) {

            const nomePersonagemID = listaNomesPersonagensSuporteParaID[contadorPosicao];
            const nomePersonagem = listaNomesPersonagensSuporte[contadorPosicao];
            const checkPersonagem = document.getElementById(`check_${nomePersonagemID}`);

            if (checkPersonagem.checked) {

                listaPersonagensEscolhidos.push(nomePersonagem);

            }

        }

        [personagem1, personagem2, personagem3] = listaPersonagensEscolhidos;

        console.log(listaPersonagensEscolhidos);
        console.log(personagem1);
        console.log(personagem2);
        console.log(personagem3);
        

        guardarBanco();

    }

    function guardarBanco() {

        // let idUsuario = sessionStorage.ID_USUARIO;

        // v nome do arquivo, depois da função que quer chamar
        fetch(`/personagens/cadastrarPersonagens`, {
            method: "PUT",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                personagem1Server: personagem1,
                personagem2Server: personagem2,
                personagem3Server: personagem3,
                idUsuario: sessionStorage.getItem("ID_USUARIO")
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {

                    setTimeout(() => {
                        window.location = "cadastroDescricao.html";
                    }, "2000");

                } else {
                    throw "Houve um erro ao tentar realizar o cadastro!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

        return false;
    }

    // function verificarCheckApenasTanque() {

    //     let qtdPersonagensChecked = 0;

    //     for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensTanque.length; contadorPosicao++) {

    //         const nomePersonagem = listaNomesPersonagensTanqueParaID[contadorPosicao];
    //         const checkPersonagem = document.getElementById(`check_${nomePersonagem}`);

    //         if (checkPersonagem.checked) {

    //             qtdPersonagensChecked++;
    //             // console.log(`Quantidade de Tanque: ${qtdPersonagensChecked}`);
    //             // console.log(`Personagem checado: ${listaNomesPersonagensTanque[contadorPosicao]}`);

    //         }

    //         if (qtdPersonagensChecked == 3) {

    //             for (let contadorPosicao2 = 0; contadorPosicao2 < listaNomesPersonagensTanque.length; contadorPosicao2++) {
    //                 const nomePersonagem2 = listaNomesPersonagensTanqueParaID[contadorPosicao2];
    //                 const checkPersonagem2 = document.getElementById(`check_${nomePersonagem2}`);

    //                 if (!checkPersonagem2.checked) {

    //                     checkPersonagem2.disabled = true;

    //                 }
    //             }

    //         } else {

    //             checkPersonagem.disabled = false;

    //         }

    //     }

    // }

    // function verificarCheckApenasDano() {

    //     let qtdPersonagensChecked = 0;

    //     for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensDano.length; contadorPosicao++) {

    //         const nomePersonagem = listaNomesPersonagensDanoParaID[contadorPosicao];
    //         const checkPersonagem = document.getElementById(`check_${nomePersonagem}`);

    //         if (checkPersonagem.checked) {

    //             qtdPersonagensChecked++;
    //             // console.log(`Quantidade de Dano: ${qtdPersonagensChecked}`);
    //             // console.log(`Personagem checado: ${listaNomesPersonagensDano[contadorPosicao]}`);

    //         }

    //         if (qtdPersonagensChecked == 3) {

    //             for (let contadorPosicao2 = 0; contadorPosicao2 < listaNomesPersonagensDano.length; contadorPosicao2++) {
    //                 const nomePersonagem2 = listaNomesPersonagensDanoParaID[contadorPosicao2];
    //                 const checkPersonagem2 = document.getElementById(`check_${nomePersonagem2}`);

    //                 if (!checkPersonagem2.checked) {

    //                     checkPersonagem2.disabled = true;

    //                 }
    //             }

    //         } else {

    //             checkPersonagem.disabled = false;

    //         }

    //     }

    // }

    // function verificarCheckApenasSuporte() {

    //     let qtdPersonagensChecked = 0;

    //     for (let contadorPosicao = 0; contadorPosicao < listaNomesPersonagensSuporte.length; contadorPosicao++) {

    //         const nomePersonagem = listaNomesPersonagensSuporteParaID[contadorPosicao];
    //         const checkPersonagem = document.getElementById(`check_${nomePersonagem}`);

    //         if (checkPersonagem.checked) {

    //             qtdPersonagensChecked++;
    //             // console.log(`Quantidade de Suporte: ${qtdPersonagensChecked}`);
    //             // console.log(`Personagem checado: ${listaNomesPersonagensSuporte[contadorPosicao]}`);

    //         }

    //         if (qtdPersonagensChecked == 3) {

    //             for (let contadorPosicao2 = 0; contadorPosicao2 < listaNomesPersonagensSuporte.length; contadorPosicao2++) {
    //                 const nomePersonagem2 = listaNomesPersonagensSuporteParaID[contadorPosicao2];
    //                 const checkPersonagem2 = document.getElementById(`check_${nomePersonagem2}`);

    //                 if (!checkPersonagem2.checked) {

    //                     checkPersonagem2.disabled = true;

    //                 }
    //             }

    //         } else {

    //             checkPersonagem.disabled = false;

    //         }
    //     }

    // }

</script>